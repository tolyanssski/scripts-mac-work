В grpc сервере появился новый метод GetAccountPositionSummaryByUser, который надо реализовать. Для его реализации в grpc сервер пробрось зависимостью через DI сервис positions.Positions, у которого вызови соответствующий метод и сконвертируй полученное dto в ответ grpc-сервера.

proto-схема выглядит так:

rpc GetAccountPositionSummaryByUser(GetAccountPositionSummaryByUserRequest) returns (GetAccountPositionSummaryByUserResponse);

message GetAccountPositionSummaryByUserRequest {
  string user_id = 1;
}

message GetAccountPositionSummaryByUserResponse {
  repeated AccountPositionSummary summaries = 1;
}

message AccountPositionSummary {
  int64 account_id = 1;
  string user_id = 2;
  double total_open_lots = 3;
}
